# Gulp сборка + SSH деплой проекта 1C-Битрикс. 

Сборщик проектов на CMS-Битрикс.

**Возможности**

- использование препроцессора Sass
- использование ES6 синтаксиса (в разработке)
- объединение и минификация css/js файлов
- SSH деплой на dev и prod серверы с сохранением истории релизов
- возможность откатиться к более ранней версии проекта
- загрузка плагинов с помощью bowerrc


### Список доступных команд

Запуск компилятора для верстки 
```
gulp watch
```
Деплой на сервер разработки 
```
gulp deploy --dev
```
Деплой на продакшн сервер 
```
gulp deploy --prod
```
Просмотр доступных релизов на сервере
```
gulp releases
```
Откатиться на необходимую версию. Тут "environment" это тип сервера, а "timestamp" это название папки нужного релиза
```
gulp rollback --<environment> --revision=<timestamp> 
```

### Подготовка

Для начала работы необходимо установить демо-версию Битрикса с помощью файла установки <a href="http://www.1c-bitrix.ru/download/scripts/bitrixsetup.php">BitrixSetup.php</a>

В корневую папку системы 1С-Битрикс клонируете файлы репозитория:
```
git clone https://github.com/oziside/bitrix-gulp-build-deploy.git
```
Если вы используете Windows 10 для работы, то для деплоя лучше установить подсистему Ubuntu,т.к. с window есть проблемы. На системах Ubuntu и Mac OS проблем не наблюдается.

Далее установим свежий Node.js и Gulp. Откройте Командную строку или PowerShell, введите команду bash (если вы используете Windows 10) и установите:

```
$ curl -sL https://deb.nodesource.com/setup_6.x -o nodesource_setup.sh
```
Здесь _6.x - первая цифра последнего стабильного релиза. Её можно узнать на сайте Nodejs.

Далее выполним команду:

```
 sudo bash nodesource_setup.sh
```
И установим Node.js:

```
$ sudo apt-get install nodejs
```
После этого установите Gulp глобально в вашей Linux подсистеме ($ npm i -g gulp) и установите все пакеты проекта ($ npm i), который мы подготовили ранее.

Дальше устанавливаем глобально bowerrc ( $ npm i -g gulp ).

После этого устанавливаем SSH соединение между вашим компьютером и удаленным сервером.

